{"version":3,"sources":["webpack:///./js/refs.js","webpack:///./js/fetchPhotos.js","webpack:///./js/render.js","webpack:///./js/pnotify-cfg.js","webpack:///./index.js","webpack:///./templates/photo-cards.hbs"],"names":["refs","gallery","document","querySelector","searchForm","loadBtn","fetchPhotos","searchQuery","page","perPage","fetch","BASE_URL","then","r","json","renderPhotoCards","cards","markup","photoCardsTpl","insertAdjacentHTML","defaults","styling","icons","width","delay","addEventListener","debounce","onSearch","target","nodeName","dataset","basicLightbox","src","show","disabled","e","preventDefault","newSearchQuery","elements","query","value","whenNewSearchQuery","whenOldSearchQuery","onFetchSuccess","data","loadCheck","onFetchError","innerHTML","top","offsetHeight","window","scrollTo","behavior","err","error","console","log","name","uploaded","hits","length","totalHits","notice","success","Handlebars","module","exports","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.c1e369fd454b45768f8f.js","sourcesContent":["const refs = {\n  gallery: document.querySelector(\".gallery\"),\n  searchForm: document.querySelector(\"#search-form\"),\n  loadBtn: document.querySelector('[data-action=\"Load more\"]'),\n};\n\nexport default refs;\n","const BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '20689084-4283bca478c3982aa5e3eeb23';\n\nfunction fetchPhotos(searchQuery, page = 1, perPage) {\n  return fetch(\n    `${BASE_URL}?image_type=photo&orientation=horizontal&q=${searchQuery}&page=${page}&per_page=${perPage}&key=${KEY}`,\n  ).then(r => r.json());\n}\nexport default fetchPhotos;\n","import refs from \"../js/refs\";\nimport photoCardsTpl from \"../templates/photo-cards.hbs\";\n\nfunction renderPhotoCards(cards) {\n  const markup = photoCardsTpl(cards);\n  refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n}\nexport default renderPhotoCards;\n","import { defaults } from \"@pnotify/core\";\nimport \"@pnotify/core/dist/PNotify.css\";\nimport \"@pnotify/core/dist/BrightTheme.css\";\nimport \"@pnotify/core/dist/Material.css\";\nimport \"material-design-icons/iconfont/material-icons.css\";\n\ndefaults.styling = \"material\";\ndefaults.icons = \"material\";\ndefaults.width = \"401px\";\ndefaults.delay = 1000;\n","import './scss/common.scss';\nimport 'material-design-icons/iconfont/material-icons.css';\nimport refs from './js/refs';\nimport fetchPhotos from './js/fetchPhotos';\nimport renderPhotoCards from './js/render';\n\nimport './js/pnotify-cfg';\nimport { success, error, notice } from '@pnotify/core';\n\nimport debounce from 'lodash.debounce';\n\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nrefs.searchForm.addEventListener('input', debounce(onSearch, 500));\nrefs.loadBtn.addEventListener('click', onSearch);\nrefs.gallery.addEventListener('click', onGalleryClick);\n\nrefs.loadBtn.disabled = true;\n\nlet searchQuery = '';\nlet page = null;\nconst perPage = 12;\n\nasync function onSearch(e) {\n  try {\n    e.preventDefault();\n    const newSearchQuery = refs.searchForm.elements.query.value;\n    if (!newSearchQuery) return;\n    if (searchQuery !== newSearchQuery) {\n      whenNewSearchQuery(newSearchQuery);\n    } else {\n      whenOldSearchQuery();\n    }\n    const data = await fetchPhotos(searchQuery, page, perPage);\n    onFetchSuccess(data);\n    loadCheck(data);\n  } catch (e) {\n    onFetchError(e);\n  }\n}\n\nfunction whenNewSearchQuery(query) {\n  page = 1;\n  searchQuery = query;\n  refs.gallery.innerHTML = '';\n}\n\nfunction whenOldSearchQuery() {\n  page += 1;\n}\n\nfunction onFetchSuccess(data) {\n  let top = refs.gallery.offsetHeight;\n  renderPhotoCards(data);\n  window.scrollTo({\n    top,\n    behavior: 'smooth',\n  });\n}\n\nfunction onFetchError(err) {\n  error(`Reboot`);\n  console.log(err.name);\n}\nfunction loadCheck(data) {\n  const uploaded = page * perPage - perPage + data.hits.length;\n  if (uploaded >= data.totalHits) {\n    refs.loadBtn.disabled = true;\n    notice(`Uploaded all images out of ${data.totalHits}`);\n    return;\n  }\n  refs.loadBtn.disabled = false;\n  success(`Uploaded ${uploaded} images out of ${data.totalHits}`);\n}\n\nfunction onGalleryClick({ target: { nodeName, dataset } }) {\n  if (nodeName !== 'IMG') return;\n  const instance = basicLightbox.create(`\n    <img src=\"${dataset.src}\">\n`);\n  instance.show();\n}\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"photo-card\\\">\\n\t<div class=\\\"wrapper\\\">\\n\t\t<img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":12},\"end\":{\"line\":4,\"column\":28}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" data-src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":47},\"end\":{\"line\":4,\"column\":64}}}) : helper)))\n    + \"\\\" height=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatHeight\") || (depth0 != null ? lookupProperty(depth0,\"webformatHeight\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatHeight\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":74},\"end\":{\"line\":4,\"column\":93}}}) : helper)))\n    + \"px\\\"\\n\t\t\twidth=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatWidth\") || (depth0 != null ? lookupProperty(depth0,\"webformatWidth\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatWidth\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":10},\"end\":{\"line\":5,\"column\":28}}}) : helper)))\n    + \"px\\\" />\\n\t\t<div class=\\\"stats\\\">\\n\t\t\t<p class=\\\"stats-item\\\">\\n\t\t\t\t<i class=\\\"material-icons\\\">thumb_up</i>\\n\t\t\t\t\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":4},\"end\":{\"line\":9,\"column\":13}}}) : helper)))\n    + \"\\n\t\t\t</p>\\n\t\t\t<p class=\\\"stats-item\\\">\\n\t\t\t\t<i class=\\\"material-icons\\\">visibility</i>\\n\t\t\t\t\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":4},\"end\":{\"line\":13,\"column\":13}}}) : helper)))\n    + \"\\n\t\t\t</p>\\n\t\t\t<p class=\\\"stats-item\\\">\\n\t\t\t\t<i class=\\\"material-icons\\\">comment</i>\\n\t\t\t\t\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":4},\"end\":{\"line\":17,\"column\":16}}}) : helper)))\n    + \"\\n\t\t\t</p>\\n\t\t\t<p class=\\\"stats-item\\\">\\n\t\t\t\t<i class=\\\"material-icons\\\">cloud_download</i>\\n\t\t\t\t\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":4},\"end\":{\"line\":21,\"column\":17}}}) : helper)))\n    + \"\\n\t\t\t</p>\\n\t\t</div>\\n\t</div>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hits\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}